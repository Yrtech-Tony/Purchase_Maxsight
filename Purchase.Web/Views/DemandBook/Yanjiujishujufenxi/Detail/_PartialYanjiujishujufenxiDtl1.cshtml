@model Purchase.DAL.Requirement_Yanjiujishujufenxi_RequirementDtl1

<form id="Yanjiujishujufenxi-dtl1-form">
    @Html.Hidden("SeqNO", 0)
    <div class="form-horizontal">
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">工作分类</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.gongzuofenlei, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">工作内容</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.gongzuoneirong, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">人员岗位</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.renyuangangwei, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">类型/品牌</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.leixingpinpai, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">规格/要求</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.guigeyaoqiu, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">质量标准</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.zhiliangbiaozhun, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">数量</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.shuliang, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">时间安排</label>
            <div class="col-md-8">
                @Html.TextBoxFor(m => m.shijiananpai, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2" for="TemplateName">其他说明</label>
            <div class="col-md-8">
                @Html.TextAreaFor(m => m.qitashuoming1, htmlAttributes: new { @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input id="saveBtn" type="button" value="保存" class="btn btn-primary btn-check" data-loading-text="提交中..." style="width:100px;height:35px" />
            </div>
        </div>
    </div>
</form>
<script>
    $(function () {
        $("#Yanjiujishujufenxi-dtl1-form #saveBtn").click(function () {
            if (!CommitCheck()) {
                alert("正在审核中或者非本人添加的项目");
                return false;
            }
            $("#myModal .modal-body #SeqNO").val($("#SeqNOForLocalCopy").val());
            $(this).button("loading")
            if ($("#myModal .modal-body #SeqNO").val() != "0") {
                var row = {
                    SeqNO: $("#myModal .modal-body #SeqNO").val(),
                    gongzuofenlei: $("#gongzuofenlei").val(), gongzuoneirong: $("#gongzuoneirong").val(), renyuangangwei: $("#renyuangangwei").val(), leixingpinpai: $("#leixingpinpai").val(), guigeyaoqiu: $("#guigeyaoqiu").val()
              , zhiliangbiaozhun: $("#zhiliangbiaozhun").val(), shuliang: $("#shuliang").val(), shijiananpai: $("#shijiananpai").val()
               , qitashuoming1: $("#qitashuoming1").val()
             
                };
                var insertCount = 0;
                for (var i = 0; i < sourceData.length; i++) {
                    if (sourceData[i].SeqNO == $("#myModal .modal-body #SeqNO").val()) {
                        insertCount = i;
                    }
                }
                // sourceData.splice($("#myModal .modal-body #SeqNO").val() - 1, 1, row);
                sourceData.splice(insertCount, 1, row);
            }
            else {
                var num = 1;
                if (sourceData.length != 0)
                { num = Number(sourceData[sourceData.length - 1].SeqNO) + 1; }
                var row = {
                    SeqNO: num,
                    gongzuofenlei: $("#gongzuofenlei").val(), gongzuoneirong: $("#gongzuoneirong").val(), renyuangangwei: $("#renyuangangwei").val(), leixingpinpai: $("#leixingpinpai").val(), guigeyaoqiu: $("#guigeyaoqiu").val()
              , zhiliangbiaozhun: $("#zhiliangbiaozhun").val(), shuliang: $("#shuliang").val(), shijiananpai: $("#shijiananpai").val()
               , qitashuoming1: $("#qitashuoming1").val()
                };
                sourceData.push(row);
            }
            loadpage();
            closeModal();
            //$(this).button("loading");
            //$.post("/DemandBook/RequirementSampleCountSearch", { requirementType: $("#RequirementType").val(), RequirementId: $("#RequirementId").val() }, function (data) {
            //    var params = $("#Yanjiujishujufenxi-dtl1-form").serializeJson('&');
            //    params = $.extend(params, getMstObject());

            //    $.post("/DemandBook/SaveYanjiujishujufenxiDtl1", params, function (data) {
            //        $("#RequirementId").val(data);
            //        loadYanjiujishujufenxiDtl1();
            //        closeModal();
            //    });
            //})
           
        })
    })
</script>